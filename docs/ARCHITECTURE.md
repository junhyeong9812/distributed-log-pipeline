# ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

> Distributed Log Pipelineì˜ ìƒì„¸ ì•„í‚¤í…ì²˜ ë¬¸ì„œì…ë‹ˆë‹¤.

---

## ğŸ“‹ ê°œìš”

ì´ í”„ë¡œì íŠ¸ëŠ” ë¶„ì‚° ë°ì´í„° íŒŒì´í”„ë¼ì¸ì„ êµ¬ì¶•í•˜ì—¬ ì‹¤ì‹œê°„ ë¡œê·¸ ìˆ˜ì§‘, ì²˜ë¦¬, ì €ì¥, ë¶„ì„ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

---

## ğŸ—ï¸ ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         System Architecture                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚       â”‚          Master Node (ë…¸íŠ¸ë¶)            â”‚
â”‚   Data          â”‚       â”‚          192.168.55.114                 â”‚
â”‚   Generator     â”‚       â”‚                                         â”‚
â”‚                 â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  (Python)       â”‚ â”€â”€â”€â”€â–¶ â”‚  â”‚   Java Backend (Spring Boot)      â”‚  â”‚
â”‚  â€¢ FastAPI      â”‚ HTTP  â”‚  â”‚   â€¢ REST API ìˆ˜ì§‘ ì„œë²„             â”‚  â”‚
â”‚  â€¢ ë°°ì¹˜ ìŠ¤ì¼€ì¤„ëŸ¬ â”‚       â”‚  â”‚   â€¢ Kafka Producer                â”‚  â”‚
â”‚                 â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚                    â”‚                    â”‚
                          â”‚                    â–¼                    â”‚
                          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                          â”‚  â”‚   Kafka (KRaft ëª¨ë“œ)               â”‚  â”‚
                          â”‚  â”‚   â€¢ ë©”ì‹œì§€ í                      â”‚  â”‚
                          â”‚  â”‚   â€¢ í† í”½: logs.raw, events.activityâ”‚  â”‚
                          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                          â”‚                    â”‚                    â”‚
                          â”‚                    â–¼                    â”‚
                          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                          â”‚  â”‚   HDFS NameNode                    â”‚  â”‚
                          â”‚  â”‚   â€¢ ë©”íƒ€ë°ì´í„° ê´€ë¦¬                â”‚  â”‚
                          â”‚  â”‚   â€¢ ë¸”ë¡ ìœ„ì¹˜ ì¶”ì                  â”‚  â”‚
                          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                          â”‚                    â”‚                    â”‚
                          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                          â”‚  â”‚   Spark Master                     â”‚  â”‚
                          â”‚  â”‚   â€¢ ì‘ì—… ìŠ¤ì¼€ì¤„ë§                  â”‚  â”‚
                          â”‚  â”‚   â€¢ ë¦¬ì†ŒìŠ¤ ê´€ë¦¬                    â”‚  â”‚
                          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                          â”‚                    â”‚                    â”‚
                          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                          â”‚  â”‚   Monitoring Stack                â”‚  â”‚
                          â”‚  â”‚   â€¢ Grafana (ì‹œê°í™”)              â”‚  â”‚
                          â”‚  â”‚   â€¢ Prometheus (ë©”íŠ¸ë¦­)            â”‚  â”‚
                          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                          â”‚                    â”‚                    â”‚
                          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                          â”‚  â”‚   Airflow                          â”‚  â”‚
                          â”‚  â”‚   â€¢ DAG ìŠ¤ì¼€ì¤„ë§                   â”‚  â”‚
                          â”‚  â”‚   â€¢ ë°°ì¹˜ ì‘ì—… ê´€ë¦¬                 â”‚  â”‚
                          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚                                       â”‚
                          â–¼                                       â–¼
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚   Worker Node 1     â”‚             â”‚   Worker Node 2     â”‚
               â”‚   192.168.55.158    â”‚             â”‚   192.168.55.9      â”‚
               â”‚                     â”‚             â”‚                     â”‚
               â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚             â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
               â”‚ â”‚ HDFS DataNode   â”‚ â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ â”‚ HDFS DataNode   â”‚ â”‚
               â”‚ â”‚ â€¢ ë¸”ë¡ ì €ì¥     â”‚ â”‚  Replicationâ”‚ â”‚ â€¢ ë¸”ë¡ ì €ì¥     â”‚ â”‚
               â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚             â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
               â”‚                     â”‚             â”‚                     â”‚
               â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚             â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
               â”‚ â”‚ Spark Worker    â”‚ â”‚             â”‚ â”‚ Spark Worker    â”‚ â”‚
               â”‚ â”‚ â€¢ ë¶„ì‚° ì²˜ë¦¬     â”‚ â”‚             â”‚ â”‚ â€¢ ë¶„ì‚° ì²˜ë¦¬     â”‚ â”‚
               â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚             â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š ë°ì´í„° í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Data Flow                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. ë°ì´í„° ìƒì„± (Generator)
   â”‚
   â”‚  â€¢ 5ì´ˆë§ˆë‹¤ ë¡œê·¸ 100ê±´ ìƒì„±
   â”‚  â€¢ 10ì´ˆë§ˆë‹¤ ì´ë²¤íŠ¸ 100ê±´ ìƒì„±
   â”‚  â€¢ HTTP POSTë¡œ Backend ì „ì†¡
   â”‚
   â–¼
2. ë°ì´í„° ìˆ˜ì§‘ (Backend)
   â”‚
   â”‚  â€¢ REST APIë¡œ ë°ì´í„° ìˆ˜ì‹ 
   â”‚  â€¢ ë°ì´í„° ê²€ì¦
   â”‚  â€¢ Kafkaë¡œ ë©”ì‹œì§€ ë°œí–‰
   â”‚
   â–¼
3. ë©”ì‹œì§€ í (Kafka)
   â”‚
   â”‚  â€¢ logs.raw í† í”½ (íŒŒí‹°ì…˜ 3ê°œ)
   â”‚  â€¢ events.activity í† í”½ (íŒŒí‹°ì…˜ 3ê°œ)
   â”‚  â€¢ 7ì¼ ë³´ì¡´
   â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                                    â”‚
   â–¼                                    â–¼
4a. ì‹¤ì‹œê°„ ì²˜ë¦¬                     4b. ë°°ì¹˜ ì²˜ë¦¬
    (Spark Streaming)                   (Spark Batch)
    â”‚                                    â”‚
    â”‚  â€¢ Kafka Consumer                  â”‚  â€¢ ì¼ë³„ ë¦¬í¬íŠ¸
    â”‚  â€¢ íŒŒí‹°ì…˜ë³„ ì €ì¥                   â”‚  â€¢ ì„œë¹„ìŠ¤ë³„ ë¶„ì„
    â”‚  â€¢ Parquet í¬ë§·                    â”‚  â€¢ ì§‘ê³„ í†µê³„
    â”‚                                    â”‚
    â–¼                                    â–¼
5. ë¶„ì‚° ì €ì¥ (HDFS)
   â”‚
   â”‚  â€¢ /data/logs/raw/year=YYYY/month=M/day=D/hour=H/
   â”‚  â€¢ /data/reports/daily/
   â”‚  â€¢ /data/analysis/service/
   â”‚
   â–¼
6. ì‹œê°í™” (Grafana)
   â”‚
   â”‚  â€¢ ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ
   â”‚  â€¢ ë©”íŠ¸ë¦­ ëª¨ë‹ˆí„°ë§
   â”‚  â€¢ ì•Œë¦¼ ì„¤ì •
```

---

## ğŸ§© ì»´í¬ë„ŒíŠ¸ ìƒì„¸

### Generator (Python)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Generator                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  FastAPI Server (:8000)              â”‚
â”‚  â”œâ”€â”€ /sample/log     ìƒ˜í”Œ ë¡œê·¸ ì¡°íšŒ  â”‚
â”‚  â”œâ”€â”€ /sample/event   ìƒ˜í”Œ ì´ë²¤íŠ¸ ì¡°íšŒâ”‚
â”‚  â””â”€â”€ /health         í—¬ìŠ¤ ì²´í¬       â”‚
â”‚                                      â”‚
â”‚  APScheduler                         â”‚
â”‚  â”œâ”€â”€ LogGeneratorJob   (5ì´ˆ ê°„ê²©)   â”‚
â”‚  â””â”€â”€ EventGeneratorJob (10ì´ˆ ê°„ê²©)  â”‚
â”‚                                      â”‚
â”‚  Generators                          â”‚
â”‚  â”œâ”€â”€ log_generator.py               â”‚
â”‚  â””â”€â”€ event_generator.py             â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Backend (Java Spring Boot)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Backend                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  REST Controller (:8081)             â”‚
â”‚  â”œâ”€â”€ POST /api/collect/logs         â”‚
â”‚  â””â”€â”€ POST /api/collect/activities   â”‚
â”‚                                      â”‚
â”‚  KafkaProducerService                â”‚
â”‚  â”œâ”€â”€ logs.raw í† í”½ ë°œí–‰             â”‚
â”‚  â””â”€â”€ events.activity í† í”½ ë°œí–‰      â”‚
â”‚                                      â”‚
â”‚  KafkaConfig                         â”‚
â”‚  â”œâ”€â”€ í† í”½ ìë™ ìƒì„±                 â”‚
â”‚  â”œâ”€â”€ íŒŒí‹°ì…˜ 3ê°œ                     â”‚
â”‚  â””â”€â”€ ë³µì œ íŒ©í„° 1                    â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Kafka

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Kafka (KRaft)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  Topics                              â”‚
â”‚  â”œâ”€â”€ logs.raw                       â”‚
â”‚  â”‚   â”œâ”€â”€ Partition 0                â”‚
â”‚  â”‚   â”œâ”€â”€ Partition 1                â”‚
â”‚  â”‚   â””â”€â”€ Partition 2                â”‚
â”‚  â”‚                                   â”‚
â”‚  â””â”€â”€ events.activity                â”‚
â”‚      â”œâ”€â”€ Partition 0                â”‚
â”‚      â”œâ”€â”€ Partition 1                â”‚
â”‚      â””â”€â”€ Partition 2                â”‚
â”‚                                      â”‚
â”‚  Consumer Groups                     â”‚
â”‚  â””â”€â”€ spark-streaming-group          â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### HDFS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           HDFS Cluster               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  NameNode (Master)                   â”‚
â”‚  â”œâ”€â”€ ë©”íƒ€ë°ì´í„° ì €ì¥                â”‚
â”‚  â”œâ”€â”€ ë¸”ë¡ ìœ„ì¹˜ ê´€ë¦¬                 â”‚
â”‚  â””â”€â”€ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ê´€ë¦¬              â”‚
â”‚                                      â”‚
â”‚  DataNode (Worker 1, 2)              â”‚
â”‚  â”œâ”€â”€ ì‹¤ì œ ë°ì´í„° ë¸”ë¡ ì €ì¥          â”‚
â”‚  â”œâ”€â”€ ë¸”ë¡ ë¦¬í¬íŠ¸                    â”‚
â”‚  â””â”€â”€ í•˜íŠ¸ë¹„íŠ¸ ì „ì†¡                  â”‚
â”‚                                      â”‚
â”‚  Directory Structure                 â”‚
â”‚  /                                   â”‚
â”‚  â”œâ”€â”€ data/                          â”‚
â”‚  â”‚   â”œâ”€â”€ logs/                      â”‚
â”‚  â”‚   â”‚   â””â”€â”€ raw/                   â”‚
â”‚  â”‚   â”‚       â””â”€â”€ year=2026/         â”‚
â”‚  â”‚   â”‚           â””â”€â”€ month=1/       â”‚
â”‚  â”‚   â”‚               â””â”€â”€ day=12/    â”‚
â”‚  â”‚   â”‚                   â””â”€â”€ hour=2/â”‚
â”‚  â”‚   â””â”€â”€ reports/                   â”‚
â”‚  â”‚       â””â”€â”€ daily/                 â”‚
â”‚  â””â”€â”€ checkpoints/                   â”‚
â”‚      â””â”€â”€ raw_logs/                  â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Spark

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Spark Cluster              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  Spark Master (Master Node)          â”‚
â”‚  â”œâ”€â”€ ì‘ì—… ìŠ¤ì¼€ì¤„ë§                  â”‚
â”‚  â”œâ”€â”€ ë¦¬ì†ŒìŠ¤ í• ë‹¹                    â”‚
â”‚  â””â”€â”€ Web UI (:8080)                 â”‚
â”‚                                      â”‚
â”‚  Spark Worker (Worker 1, 2)          â”‚
â”‚  â”œâ”€â”€ Executor ì‹¤í–‰                  â”‚
â”‚  â”œâ”€â”€ íƒœìŠ¤í¬ ì²˜ë¦¬                    â”‚
â”‚  â””â”€â”€ ê²°ê³¼ ë°˜í™˜                      â”‚
â”‚                                      â”‚
â”‚  Jobs                                â”‚
â”‚  â”œâ”€â”€ raw_to_hdfs.py (Streaming)     â”‚
â”‚  â”œâ”€â”€ daily_report.py (Batch)        â”‚
â”‚  â””â”€â”€ service_analysis.py (Batch)    â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ ë„¤íŠ¸ì›Œí¬ êµ¬ì„±

### í¬íŠ¸ ë§¤í•‘

| ì„œë¹„ìŠ¤ | í¬íŠ¸ | í”„ë¡œí† ì½œ | ì„¤ëª… |
|--------|------|----------|------|
| Kafka | 9092 | TCP | Broker |
| Kafka UI | 8080 | HTTP | ëª¨ë‹ˆí„°ë§ UI |
| HDFS NameNode | 9000 | RPC | HDFS í”„ë¡œí† ì½œ |
| HDFS NameNode | 9870 | HTTP | Web UI |
| HDFS DataNode | 9864 | HTTP | Web UI |
| HDFS DataNode | 9866 | TCP | ë°ì´í„° ì „ì†¡ |
| HDFS DataNode | 9867 | RPC | IPC |
| Spark Master | 7077 | TCP | Cluster í†µì‹  |
| Spark Master | 8080/8082 | HTTP | Web UI |
| Spark Worker | 8081 | HTTP | Web UI |
| Airflow | 8084 | HTTP | Web UI |
| Grafana | 3000 | HTTP | Dashboard |
| Prometheus | 9090 | HTTP | Metrics |
| Backend | 8081 | HTTP | REST API |
| Generator | 8000 | HTTP | REST API |

### Docker Compose ë„¤íŠ¸ì›Œí¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      pipeline-network (bridge)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  Master Node                         â”‚
â”‚  â”œâ”€â”€ kafka         172.20.0.2       â”‚
â”‚  â”œâ”€â”€ namenode      172.20.0.3       â”‚
â”‚  â”œâ”€â”€ spark-master  172.20.0.4       â”‚
â”‚  â”œâ”€â”€ backend       172.20.0.5       â”‚
â”‚  â””â”€â”€ ...                            â”‚
â”‚                                      â”‚
â”‚  Worker Node (network_mode: host)    â”‚
â”‚  â”œâ”€â”€ datanode      192.168.55.x     â”‚
â”‚  â””â”€â”€ spark-worker  192.168.55.x     â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Kubernetes ë„¤íŠ¸ì›Œí¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Cluster Network (Flannel)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  Pod Network: 10.42.0.0/16          â”‚
â”‚  Service Network: 10.43.0.0/16      â”‚
â”‚                                      â”‚
â”‚  Services (ClusterIP)                â”‚
â”‚  â”œâ”€â”€ kafka.log-pipeline.svc         â”‚
â”‚  â”œâ”€â”€ namenode.log-pipeline.svc      â”‚
â”‚  â”œâ”€â”€ spark-master-svc.log-pipeline  â”‚
â”‚  â””â”€â”€ ...                            â”‚
â”‚                                      â”‚
â”‚  NodePort (ì™¸ë¶€ ì ‘ì†)                â”‚
â”‚  â”œâ”€â”€ 30000 â†’ Grafana                â”‚
â”‚  â”œâ”€â”€ 30082 â†’ Spark UI               â”‚
â”‚  â”œâ”€â”€ 30084 â†’ Airflow                â”‚
â”‚  â””â”€â”€ 30870 â†’ HDFS UI                â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ ë°ì´í„° í˜•ì‹

### ë¡œê·¸ ë°ì´í„° (logs.raw)

```json
{
  "timestamp": 1736645166.291045,
  "level": "INFO",
  "service": "api-gateway",
  "host": "worker-1",
  "message": "Request processed successfully",
  "metadata": {
    "request_id": "uuid-1234",
    "response_time_ms": 45,
    "status_code": 200,
    "endpoint": "/api/users",
    "method": "GET"
  }
}
```

### ì´ë²¤íŠ¸ ë°ì´í„° (events.activity)

```json
{
  "event_id": "evt-uuid-5678",
  "timestamp": 1736645166.456789,
  "user_id": "user_12345",
  "session_id": "sess_abcde",
  "event_type": "CLICK",
  "event_data": {
    "page": "/products/123",
    "element": "add_to_cart_button"
  },
  "device": {
    "type": "mobile",
    "os": "iOS",
    "browser": "Safari"
  }
}
```

### HDFS ì €ì¥ í˜•ì‹ (Parquet)

```
/data/logs/raw/
â”œâ”€â”€ year=2026/
â”‚   â””â”€â”€ month=1/
â”‚       â””â”€â”€ day=12/
â”‚           â””â”€â”€ hour=2/
â”‚               â”œâ”€â”€ part-00000-xxx.snappy.parquet
â”‚               â”œâ”€â”€ part-00001-xxx.snappy.parquet
â”‚               â””â”€â”€ ...
â””â”€â”€ _spark_metadata/
    â”œâ”€â”€ 0
    â”œâ”€â”€ 1
    â””â”€â”€ ...
```

---

## ğŸ”„ í™•ì¥ì„±

### ìˆ˜í‰ í™•ì¥ (Scale Out)

```
í˜„ì¬ êµ¬ì„±:
Master (1) + Worker (2) = 3 ë…¸ë“œ

í™•ì¥ ì‹œ:
Master (1) + Worker (N) = N+1 ë…¸ë“œ

í™•ì¥ ë°©ë²•:
1. ìƒˆ Worker ë…¸ë“œ ì¤€ë¹„
2. k3s agent ì„¤ì¹˜ (Kubernetes)
3. DaemonSetì´ ìë™ìœ¼ë¡œ DataNode, Spark Worker ë°°í¬
```

### ìˆ˜ì§ í™•ì¥ (Scale Up)

```
Spark Worker ë¦¬ì†ŒìŠ¤ ì¡°ì •:
- SPARK_WORKER_MEMORY: ë©”ëª¨ë¦¬ í• ë‹¹ëŸ‰
- SPARK_WORKER_CORES: CPU ì½”ì–´ ìˆ˜

HDFS ë³µì œ íŒ©í„° ì¡°ì •:
- dfs.replication: 1 â†’ 2 â†’ 3
```

---

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### í˜„ì¬ êµ¬ì„± (ê°œë°œìš©)

- ì¸ì¦ ì—†ìŒ
- ì•”í˜¸í™” ì—†ìŒ
- ëª¨ë“  ê¶Œí•œ í—ˆìš©

### í”„ë¡œë•ì…˜ ê¶Œì¥

- Kafka: SASL/SSL ì¸ì¦
- HDFS: Kerberos ì¸ì¦
- Spark: ì•”í˜¸í™”ëœ í†µì‹ 
- K8s: RBAC, NetworkPolicy
- ëª¨ë‹ˆí„°ë§: ì¸ì¦ ë° HTTPS

---

## ğŸ“ˆ ëª¨ë‹ˆí„°ë§ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Monitoring Stack             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  Prometheus                          â”‚
â”‚  â”œâ”€â”€ scrape_interval: 15s           â”‚
â”‚  â”œâ”€â”€ targets:                       â”‚
â”‚  â”‚   â”œâ”€â”€ spark-master:8080          â”‚
â”‚  â”‚   â””â”€â”€ self:9090                  â”‚
â”‚  â””â”€â”€ storage: local                 â”‚
â”‚                                      â”‚
â”‚           â”‚                          â”‚
â”‚           â–¼                          â”‚
â”‚                                      â”‚
â”‚  Grafana                             â”‚
â”‚  â”œâ”€â”€ datasource: Prometheus         â”‚
â”‚  â”œâ”€â”€ dashboards:                    â”‚
â”‚  â”‚   â”œâ”€â”€ Overview                   â”‚
â”‚  â”‚   â”œâ”€â”€ Kafka                      â”‚
â”‚  â”‚   â”œâ”€â”€ Spark                      â”‚
â”‚  â”‚   â””â”€â”€ HDFS                       â”‚
â”‚  â””â”€â”€ alerts: (ì„¤ì • ê°€ëŠ¥)            â”‚
â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```